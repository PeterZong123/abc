<div class="app flex-row align-items-center">

  <div class="app-body">


    <!-- Main content -->
    <main class="main">

      <!-- Breadcrumb -->
      <ol class="breadcrumb">
        <li class="breadcrumb-item">应用中心</li>
        <li class="breadcrumb-item active">我的应用</li>
        <li class="breadcrumb-item active">部署新应用</li>
      </ol>


      <div class="container-fluid">

        <div class="animated fadeIn">
          <div class="row">
            <div class="col-md-12">
              <div class="card">
                <div class="card-header">
                  <strong>部署新应用</strong>
                </div>
                <div class="card-block">
                  <form enctype="multipart/form-data" class="form-horizontal" (ngSubmit)="onSubmit(clusterForm)" [formGroup]="clusterForm">
                    <div class="form-group row">
                      <label class="col-md-3 form-control-label" for="text-input">应用名称</label>
                      <div class="col-md-9">
                        <input type="text" name="clustername" class="form-control" placeholder="cluster name" formControlName="clustername">
                        <small *ngIf="formErrors['clustername']" class="txt-error animated fadeIn">{{formErrors['clustername']}}</small>
                      </div>
                    </div>
                    <div class="form-group row">
                      <label class="col-md-3 form-control-label" for="text-input">应用描述</label>
                      <div class="col-md-9">
                        <input type="text" name="clusterdescription" class="form-control" placeholder="cluster description" formControlName="clusterdescription">
                      </div>
                    </div>
                    <div class="form-group row">
                      <label class="col-md-3 form-control-label" for="text-input">选择镜像</label>
                      <div class="col-md-9">
                        <select name="imageid" class="form-control" size="1" formControlName="imageid">
                          <option value="{{image.id}}" *ngFor="let image of imageList">{{image.name}} : {{image.tag}}</option>
                        </select>
                        <small class="txt-error animated fadeIn" *ngIf="formErrors['imageid']">{{formErrors['imageid']}}</small>
                      </div>
                    </div>
                    <div class="form-group row">
                      <label class="col-md-3 form-control-label" for="text-input">挂载配置信息</label>
                      <div class="col-md-9">
                        <select name="configid" class="form-control" size="1" formControlName="configid">
                            <option value="{{config.Row_ID}}" *ngFor="let config of configList">{{config.Config_Name}}</option>
                        </select>
                        <small class="txt-error animated fadeIn" *ngIf="formErrors['configid']">{{formErrors['configid']}}</small>
                      </div>
                    </div>
                    <div class="form-group row">
                      <label class="col-md-3 form-control-label" for="text-input">部署区域</label>
                      <div class="col-md-9">
                        <select name="regionid" class="form-control" size="1" formControlName="regionid">
                          <option value="0">上海</option>
                          <option value="1">北京</option>
                          <option value="2">广州</option>
                          <option value="3">香港</option>
                          <option value="3">多伦多</option>
                        </select>
                        <small class="txt-error animated fadeIn" *ngIf="formErrors['regionid']">{{formErrors['regionid']}}</small>
                      </div>
                    </div>
                    <div class="form-group row">
                      <label class="col-md-3 form-control-label" for="text-input">硬件规格</label>
                      <div class="col-md-9">
                        <select name="flavor" class="form-control" size="1" formControlName="flavor" #flavor (ngModelChange)="flavorChange()">
                          <option value="1">1核2G</option>
                          <option value="2">2核4G</option>
                          <option value="3">3核6G</option>
                          <option value="4">4核8G</option>
                        </select>
                        <small class="txt-error animated fadeIn" *ngIf="formErrors['flavor']">{{formErrors['flavor']}}</small>
                      </div>
                    </div>
                    <div class="form-group row">
                      <label class="col-md-3 form-control-label" for="text-input">副本数量</label>
                      <div class="col-md-9">
                        <div nz-row>
                          <div nz-col [nzSpan]="20">
                              <nz-slider [nzStep]="flavor.value==2 ? 3: 2" formControlName="instancenumber" [(ngModel)]="slideValue" (ngModelChange)="instanceChange(clusterForm)"></nz-slider>
                              <small class="txt-error animated fadeIn" *ngIf="formErrors['instancenumber']">{{formErrors['instancenumber']}}</small>
                          </div>
                          <div nz-col [nzSpan]="4">
                              {{priceInfo}}
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="form-group row">
                      <label class="col-md-3 form-control-label" for="text-input">持久化存储</label>
                      <div class="col-md-4">
                        <input type="text" name="storage" class="form-control" placeholder="30g" formControlName="storage">
                      </div>
                      <div class="col-md-5">
                        <input type="text" name="storagepath" class="form-control" placeholder="挂载位置，例如/home/appuser" formControlName="storagepath">
                      </div>
                    </div>
                    <div class="form-group row">
                      <label class="col-md-3 form-control-label" for="text-input">实例启动命令</label>
                      <div class="col-md-9">
                        <input type="text" name="cmd" class="form-control" placeholder="run cmd" formControlName="cmd">
                      </div>
                    </div>
                    <div class="card-footer">
                      <button type="submit" class="btn btn-sm btn-primary" [disabled]="clusterForm.invalid"><i class="fa fa-dot-circle-o"></i> 开始部署</button>
                    </div>
                  </form>
                </div>
                
              </div>
            </div>
          </div>


        </div>




      </div>
      <!-- /.conainer-fluid -->
    </main>

  </div>

</div>






