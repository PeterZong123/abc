<div nz-row [nzGutter]="24" class="py-lg">
    <div nz-col>
        <nz-card [nzNoHovering]="true">
            <ng-template #title>
                <strong>个人信息</strong>
            </ng-template>
            <ng-template #body>
                <div nz-row [nzGutter]="64">
                    <div nz-col [nzSpan]="16">
                        <form nz-form [formGroup]="profileForm" (ngSubmit)="profileSave($event, profileForm.value)" [nzLayout]="'vertical'">
                            <div nz-form-item nz-row>
                                <div nz-form-label nz-col>
                                    <label for="name" nz-form-item-required>姓名</label>
                                </div>
                                <div nz-form-control nz-col [nzHasFeedback]="'true'" [nzValidateStatus]="getFormControl('name')">
                                    <nz-input formControlName="name" [nzId]="'name'"></nz-input>
                                    <div *ngIf="getFormControl('name').invalid && (getFormControl('name').dirty || getFormControl('name').touched)">
                                        <div nz-form-explain *ngIf="getFormControl('name').errors.required">姓名不能为空!</div>
                                        <!-- <div nz-form-explain *ngIf="name.errors.pattern">must match pattern [-_a-zA-Z0-9]</div> -->
                                    </div>
                                </div>
                            </div>
                            <div nz-form-item nz-row>
                                <div nz-form-label nz-col>
                                    <label for="email" nz-form-item-required>邮箱</label>
                                </div>
                                <div nz-form-control nz-col [nzHasFeedback]="'true'" [nzValidateStatus]="getFormControl('email')">
                                    <nz-input formControlName="email" [nzId]="'email'"></nz-input>
                                    <div *ngIf="getFormControl('email').invalid && (getFormControl('email').dirty || getFormControl('email').touched)">
                                        <div nz-form-explain *ngIf="getFormControl('email').errors.email">邮箱格式不正确!</div>
                                    </div>
                                </div>
                            </div>
                            <div nz-form-item nz-row>
                                <div nz-form-label nz-col>
                                    <label for="phone">手机号</label>
                                </div>
                                <div nz-form-control nz-col [nzHasFeedback]="'true'" [nzValidateStatus]="getFormControl('phone')">
                                    <nz-input formControlName="phone" [nzId]="'phone'"></nz-input>
                                    <div *ngIf="getFormControl('phone').invalid && (getFormControl('phone').dirty || getFormControl('phone').touched)">
                                        <div nz-form-explain *ngIf="getFormControl('phone').errors.pattern">手机号码格式不正确!</div>
                                    </div>
                                </div>
                            </div>
                            <div nz-form-item nz-row>
                                <div nz-form-label nz-col>
                                    <label for="old_password" nz-form-item-required>旧密码</label>
                                </div>
                                <div nz-form-control nz-col nzHasFeedback [nzValidateStatus]="getFormControl('old_password')">
                                    <nz-input formControlName="old_password" [nzId]="'old_password'" [nzType]="'password'"></nz-input>
                                    <div *ngIf="getFormControl('old_password').invalid && (getFormControl('old_password').dirty || getFormControl('old_password').touched)">
                                        <div nz-form-explain *ngIf="getFormControl('old_password').errors.required">旧密码不能为空!</div>
                                        <div nz-form-explain *ngIf="getFormControl('old_password').errors.notsamebefore">输入的密码与原密码不一致!</div>
                                    </div>
                                </div>
                            </div>
                            <div nz-form-item nz-row>
                                <div nz-form-label nz-col>
                                    <label for="new_password">新密码</label>
                                </div>
                                <div nz-form-control nz-col nzHasFeedback [nzValidateStatus]="getFormControl('new_password')">
                                    <nz-input formControlName="new_password" [nzId]="'new_password'" [nzType]="'password'" (ngModelChange)="updateConfirmValidator()"></nz-input>
                                </div>
                            </div>
                            <div nz-form-item nz-row>
                                <div nz-form-label nz-col>
                                    <label for="confirm_new_password">确认新密码</label>
                                </div>
                                <div nz-form-control nz-col nzHasFeedback [nzValidateStatus]="getFormControl('confirm_new_password')">
                                    <nz-input formControlName="confirm_new_password" [nzId]="'confirm_new_password'" [nzType]="'password'"></nz-input>
                                    <div *ngIf="getFormControl('confirm_new_password').invalid && (getFormControl('confirm_new_password').dirty || getFormControl('confirm_new_password').touched)">
                                        <div nz-form-explain *ngIf="getFormControl('confirm_new_password').errors.confirm">两次输入的密码不一致!</div>
                                    </div>
                                </div>
                            </div>
                            <div nz-row>
                                <button nz-button [nzType]="'primary'" [disabled]="profileForm.invalid">更新个人信息</button>
                            </div>
                        </form>
                    </div>
                    <div nz-col [nzSpan]="8">
                        <div nz-row>
                            <div nz-col>
                                <img-cropper #cropper [image]="imageData" [settings]="cropperSettings"></img-cropper>
                            </div>
                        </div>
                        <div nz-row>
                            <div nz-col>
                                <button nz-button class="ant-btn__block file-upload">
                                    <input id="file1" accept type="file" (change)="fileChange($event)" />
                                    <i class="anticon anticon-upload"></i>
                                    <span>上传图片</span>
                                </button>
                                <div class="my-md" *ngIf="imageData.image">
                                    <img class="rounded-circle" [src]="imageData.image" [width]="cropperSettings.croppedWidth" [height]="cropperSettings.croppedHeight">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </ng-template>
        </nz-card>
    </div>
</div>